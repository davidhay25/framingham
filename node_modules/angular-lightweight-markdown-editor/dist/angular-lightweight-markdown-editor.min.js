angular.module("angular-lightweight-markdown-editor-templates",[]).run(["$templateCache",function(t){t.put("angular-lightweight-markdown-template.html",'<div class="markdown-editor"><ul class="markdown-editor__actions"><li ng-repeat="control in markdownEditorCtrl.options.controls track by $index" ng-click="markdownEditorCtrl.action(control)" ng-class="{separator: control == \'separator\'}" ng-if="control != \'preview\'"><i ng-if="control != \'separator\'" class="{{markdownEditorCtrl.icons[control]}}"></i></li><li ng-if="markdownEditorCtrl.options.controls.indexOf(\'preview\') > -1" ng-click="markdownEditorCtrl.preview = !markdownEditorCtrl.preview" ng-show="markdownEditorCtrl.showdownEnabled" ng-class="{enabled: markdownEditorCtrl.preview}" class="preview">{{markdownEditorCtrl.translations.textPreview}}</li></ul><div class="markdown-editor__editorarea"><div ng-class="{nopreview: !markdownEditorCtrl.preview}"><textarea ng-model="markdownEditorCtrl.ngModel"></textarea></div><div class="markdown-editor__editorarea__preview" ng-if="markdownEditorCtrl.showdownEnabled" ng-show="markdownEditorCtrl.preview" ng-bind-html="markdownEditorCtrl.getHTML()"></div></div></div>')}]),function(){function t(){return{restrict:"E",templateUrl:"angular-lightweight-markdown-template.html",controller:e,controllerAs:"markdownEditorCtrl",scope:!0,bindToController:{ngModel:"=",textPreview:"@",textProvideText:"@",textProvideLink:"@",showPreview:"=",options:"="},require:["^form","ngModel"],link:function(t,e,r,i){n=e.find("textarea")[0];var o=(i[0],["name","required","minLength","maxLength","placeholder","selectionDirection","selectionStart","selectionEnd","spellcheck"]);angular.forEach(o,function(t){r[t]&&(n[t]=r[t])})}}}function e(t){this.preview=!1,"undefined"!=typeof this.showPreview&&(this.preview=this.showPreview),this.showdownEnabled="undefined"!=typeof showdown;for(var e in o)angular.isDefined(this[e])&&(o[e]=this[e]);this.translations=o,this.action=function(t){var e=l[t](this.ngModel,r());e!==!1&&(this.ngModel=e)},this.getHTML=function(){return this.showdownEnabled?t.trustAsHtml(s.makeHtml(this.ngModel)):""},this.options=angular.extend({},a,this.options),this.icons=u}function r(){return{start:n.selectionStart,end:n.selectionEnd,length:n.selectionEnd-n.selectionStart}}angular.module("angular-lightweight-markdown-editor",["ngSanitize","angular-lightweight-markdown-editor-templates"]).directive("markdownEditor",t);var n,o={textPreview:"Preview",textProvideText:"Please provide link text",textProvideLink:"Please provide link URL"};if("undefined"!=typeof showdown)var s=new showdown.Converter;var a={controls:["bold","italic","strikethrough","separator","heading","bullets","indent","code","separator","link","quote","separator","preview"]};e.$inject=["$sce"];var l={bold:function(t,e){return 0==e.length?t:d.surround(t,e.start,e.end-e.start,"**","**")},italic:function(t,e){return 0==e.length?t:d.surround(t,e.start,e.end-e.start,"*","*")},bullets:function(t,e){return d.startLinesWith(t,e.start,e.end,"* ")},heading:function(t,e){return d.startLinesWith(t,e.start,e.end,"#")},strikethrough:function(t,e){return 0==e.length?t:d.surround(t,e.start,e.end-e.start,"--","--")},indent:function(t,e){return d.startLinesWith(t,e.start,e.end,"	")},quote:function(t,e){return d.startLinesWith(t,e.start,e.end,"> ")},code:function(t,e){if(0==e.length)return t;var r=t.substr(0,e.start).lastIndexOf("\n")+1,n=t.substr(e.end).indexOf("\n");if(-1==n)var i=t.length;else var i=e.end+n+1;return[t.substr(0,r),"```\n",t.substr(r,i-r),"\n```\n",t.substr(i)].join("")},link:function(t,e){if(e.length>0)var r=t.substr(e.start,e.length);else{var r=prompt(o.textProvideText);if(!r)return!1}var n=prompt(o.textProvideLink);return n?[t.substr(0,e.start),"["+r+"]","("+n+")",t.substr(e.end)].join(""):!1}},d={surround:function(t,e,r,n,i){var o=t.substr(e,r);return[t.substr(0,e),n?n:"",o,i?i:"",t.substr(e+r)].join("")},startLinesWith:function(t,e,r,n){var i=d.indexes(t.substr(e,r-e),"\n",e),o=t.substr(0,e).lastIndexOf("\n")+1;t=[t.substr(0,o),n,t.substr(o)].join("");for(var s=0;s<i.length;s++)t=[t.substr(0,n.length*(s+1)+i[s]+1),n,t.substr(n.length*(s+1)+i[s]+1)].join("");return t},indexes:function(t,e,r){var n=[];for(i=0;i<t.length;++i)t.substring(i,i+e.length)==e&&n.push(i+r);return n}},u={bold:"ame-bold",italic:"ame-italic",strikethrough:"ame-strikethrough",heading:"ame-header",bullets:"ame-list-ul",indent:"ame-indent",code:"ame-code",link:"ame-link",quote:"ame-quote-right"}}();