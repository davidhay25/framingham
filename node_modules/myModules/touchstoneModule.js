
var request = require('request');

var app;
var log = true;

exports.setup = function(inApp){
    app = inApp;

    app.post('/ts/authenticate',authenticate)

    console.log('ts setup')
};


//authenticate with the Touchstone server
var authenticate = function(req,res) {
    var body = req.body;
    if (log) {
        console.log('authenticate',body)
    }

    var options = {
        method:'POST',
        body:JSON.stringify(body),
        headers: {'content-type':'application/json'},
        uri : "https://touchstone.aegis.net/touchstone/api/authenticate"
    };

    request(options,function(error,response,reply) {

        //console.log(response.statusCode,reply)

        res.status(response.statusCode).json(reply)

    })
};