
var request = require('request');

//var app;
var log = false;

exports.setup = function(app){
    //app = inApp;

    app.post('/ts/authenticate',authenticate)
    if (log) {
        console.log('ts setup')
    }
};



//authenticate with the Touchstone server
var authenticate = function(req,res) {
    var body = req.body;
    if (log) {
        console.log('authenticate',body)
    }

    var options = {
        method:'POST',
        body:JSON.stringify(body),
        headers: {'content-type':'application/json'},
        uri : "https://touchstone.aegis.net/touchstone/api/authenticate"
    };

    request(options,function(error,response,reply) {
        res.status(response.statusCode).json(reply)
    })
};