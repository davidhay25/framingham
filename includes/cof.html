<div>
    <style>
        #cofGraph {
            width: 100%;
            height: 500px;
            border: 1px solid lightgray;
        }

        .scrollTable {
            height: 500px;
            overflow-y: scroll;
        }

    </style>
    <div class="row" ng-show="selectedTrack">
        <div class="col-sm-2 col-md-2">

            <select class="form-control" ng-model="input.scenario"
                    ng-change="cofSelectScenario(input.scenario)"
                    ng-options="scenario.name for scenario in selectedTrack.scenarios"></select>

        </div>
        <div class="col-sm-3 col-md-3">
            <div><strong>Scenario description</strong></div>
            <p ng-bind-html="cofScenario.description | markDown"></p>
        </div>
        <div class="col-sm-2 col-md-2">
            <div><strong>Review Purpose</strong></div>
            <p ng-bind-html="cofScenario.reviewPurpose | markDown"></p>
        </div>
        <div class="col-sm-4 col-md-4">
            <uib-tabset>
                <uib-tab heading="Core resource types">
                    <div class="row">
                        <div class="col-sm-3 clickable" ng-repeat="type in cofScenario.scenarioTypes">
                            <span ng-click="selectCofType(type)"  style="cursor:pointer">{{type}}</span>
                        </div>
                        <div class="col-sm-3 clickable" ng-click="selectCoreType()">&gt;Select Direct&lt;</div>
                    </div>
                </uib-tab>
                <uib-tab >
                    <uib-tab-heading>
                        Profiles
                        <span class="badge">{{cofScenario.lms.length}}</span>


                    </uib-tab-heading>
                    <div class="row">
                        <div class="col-sm-3 clickable" ng-repeat="lm in cofScenario.lms">
                            <span ng-click="selectLM(lm)"  style="cursor:pointer"
                                  uib-popover={{lm.description}}
                                  popover-placement="top"
                                  popover-trigger="'mouseenter'">
                                {{lm.url | getLogicalID}}</span>
                        </div>
                    </div>
                </uib-tab>
            </uib-tabset>
        </div>
        <div class="col-sm-1 col-md-1">
            <button class="btn btn-primary pull-right" ng-click="saveGraph()">Save</button>
        </div>

    </div>
    <hr/>

    <div class="row">
        <div ng-class="leftPane">
            <uib-tabset>
                <uib-tab heading="List">
                    <br/>
                    <div class="scrollTable">
                        <table class="table table-bordered">
                            <tr><th>Type</th><th>Title</th><th>References</th><th></th></tr>
                            <tr ng-repeat="item in cofTypeList">
                                <td><span class="clickable" ng-click="selectItem(item)"> {{item.type}}</span>
                                    <a class="pull-right" target="_blank" ng-href="{{fhirBasePath}}{{item.baseType | lowercase}}.html">
                                        <i class="clickable glyphicon glyphicon-question-sign">
                                        </i>
                                    </a>

                                </td>
                                <td><span class="clickable" ng-click="editDescription(item)"> {{item.description}}</span></td>
                                <td>
                                    <div ng-repeat="row in item.table">
                                        <div ng-repeat="ref in row.references">
                                            <i class="clickable glyphicon glyphicon-remove-sign"
                                               title="Remove resource" ng-click="removeReference(ref)">
                                            </i>
                                            {{ref.sourcePath}} -> {{ref.targetItem.description}}
                                        </div>
                                    </div>

                                </td>
                                <td>
                                    <i class="clickable glyphicon glyphicon-remove-sign"
                                       title="Remove resource" ng-click="removeItem($index)">
                                    </i>
                                </td>
                            </tr>
                        </table>
                    </div>

                </uib-tab>
                <uib-tab heading="Graph" select = "fitGraph()">
                    <div id="cofGraph"></div>
                </uib-tab>
            </uib-tabset>

        </div>
        <div ng-class="rightPane">
            <uib-tabset>
                <uib-tab heading="Table">
                    <tbl-resource trigger="showResourceTable" reference="cofAddReference"
                                  resource-json="fnResourceJson"
                                  fnshownotes="setShowNotes"></tbl-resource>
                </uib-tab>
                <uib-tab heading="Resource Json">
                    <pre>{{resourceJson.resource | json}}</pre>
                </uib-tab>
                <uib-tab heading="Item Json">
                    <pre>{{resourceJson.raw | json}}</pre>
                </uib-tab>
            </uib-tabset>



        </div>
    </div>


</div>