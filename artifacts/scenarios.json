{
  "scenarios": [
    {"id":"s1-1","name":"PACS Testing",
      "roleIds":["r1-1","r1-2","r1-3","r1-4"],
      "action": "The FHIR Broker makes direct QIDO-RS and WADO-RS requests of the PACS.",
      "precondition": "PACS needs to be loaded with specific image sets that match patient MRN's known by the EHR.",
      "success": "Logs on the FHIR Broker will indicate if the QIDO-RS and WADO-RS requests were successful. The FHIR Broker is a tool that has been developed by WUSTL. We have the ability to update the code and log what we need to demonstrate success.",
      "bonus" : ["The S4S protocol supports requests for new data after a certain point in time. It would be interesting to have the FHIR Broker send queries to the PACS that include date ranges to make sure the PACS filters appropriately."]

    },
    {"id":"s1-2","name":"Research App (Broker)",
      "roleIds":["r1-1","r1-2","r1-3","r1-4"],
      "steps" : [
        "Research App obtains access token from SMART on FHIR Enabled EHR.",
        "(Optional) Research App retrieves problem list from EHR. The FHIR resource is Condition.",
        "Research App sends a search to the FHIR Broker for the ImagingStudy resources for a patient who has opted in to the research study.",
        "FHIR Broker validates the request and sends a QIDO-RS request to the PACS to determine the answer.",
        "FHIR Broker takes the response from the PACS, packages the response as a FHIR response, and returns that data to the Research App.",
        "Research App performs a WADO-RS retrieve to the FHIR Broker for the images for a particular DICOM Study Instance UID.",
        "FHIR Broker validates the request and sends a WADO-RS request to the PACS to retrieve the images.",
        "FHIR Broker takes the response from the PACS and returns the WADO-RS quest to the Research App."
      ]

    },
    {"id":"s1-3","name":"Research App",
      "roleIds":["r1-1","r1-2","r1-3","r1-4"]},
    {"id":"s2-1","name":"Solicited", "roleIds":["r2-1","r2-2","r2-3"]},
    {"id":"s2-2","name":"Unsolicited", "roleIds":["r2-1","r2-2","r2-3"]},
    {"id":"s2-3","name":"Prior Authorization", "roleIds":["r2-1","r2-2","r2-3"]},
    {"id":"s3-1","name":"Develop SHR model", "roleIds":["r3-1","r3-2","r3-3"]},
    {"id":"s3-2","name":"Upload model", "roleIds":["r3-1","r3-2","r3-3"]},
    {"id":"s3-3","name":"Create conforming resources", "roleIds":["r3-1","r3-2","r3-3"]},
    {"id":"s3-4","name":"Validate Domain models", "roleIds":["r3-1","r3-2","r3-3"]},


    {"id":"s5-1","name":"Chronic Conditions", "roleIds":["r5-1","r5-2","r5-3","r5-4"]},
    {"id":"s5-2","name":"Multi-Provider Care Coordination", "roleIds":["r5-1","r5-2","r5-3","r5-4"]},





    {"id":"s18a-1","name":"Eligibility",
      "description":"Submit an Eligibility, Retrieve/Receive an EligibilityResponse", "roleIds":["r18a-1","r18a-2","r18a-3","r18a-4","r18a-5","r18a-6","r18a-7","r18a-8","r18a-9","r18a-10","r18a-11"]},
    {"id":"s18a-2","name":"Pre-Auth",
      "description":"Submit a Pre-Authorization (Claim Resource) then an Attachment, Retrieve/Receive a ClaimResponse", "roleIds":["r18a-1","r18a-2","r18a-3","r18a-4","r18a-5","r18a-6","r18a-7","r18a-8","r18a-9","r18a-10","r18a-11"]},
    {"id":"s18a-3","name":"Submit Claim",
      "description":"Submit a Claim, Retrieve/Receive a ClaimResponse :via REST (Create), Retrieve a ClaimResponse (Get) :via HTTP and Receive a ClaimResponse", "roleIds":["r18a-1","r18a-2","r18a-3","r18a-4","r18a-5","r18a-6","r18a-7","r18a-8","r18a-9","r18a-10","r18a-11"]},
    {"id":"s18a-4","name":"Submit Instititional Claim",
      "description":"Submit Veteran Institutional Claim to VA Payor, Receive/Retrieve ClaimResponse", "roleIds":["r18a-1","r18a-2","r18a-3","r18a-4","r18a-5","r18a-6","r18a-7","r18a-8","r18a-9","r18a-10","r18a-11"]},
    {"id":"s18a-5","name":"Retrieve Deferred response",
      "description":"Retrieve deferred ClaimResponse via ProcessRequest", "roleIds":["r18a-1","r18a-2","r18a-3","r18a-4","r18a-5","r18a-6","r18a-7","r18a-8","r18a-9","r18a-10","r18a-11"]},
    {"id":"s18a-6","name":"Retrieve processing status",
      "description":"Retrieve the processing status (ProcessResponse) via ProcessRequest", "roleIds":["r18a-1","r18a-2","r18a-3","r18a-4","r18a-5","r18a-6","r18a-7","r18a-8","r18a-9","r18a-10","r18a-11"]},
    {"id":"s18a-7","name":"Retrieve payment reconciliation",
      "description":"Retrieve a PaymentReconciliation via ProcessRequest", "roleIds":["r18a-1","r18a-2","r18a-3","r18a-4","r18a-5","r18a-6","r18a-7","r18a-8","r18a-9","r18a-10","r18a-11"]},
    {"id":"s18a-8","name":"Retrieve EOB",
      "description":"Retrieve an ExplanationOfBenefit via ProcessRequest", "roleIds":["r18a-1","r18a-2","r18a-3","r18a-4","r18a-5","r18a-6","r18a-7","r18a-8","r18a-9","r18a-10","r18a-11"]},


    {"id":"s22-1","name":"Register a new patient", "roleIds":["r22-1","r22-2"],
      "description":"Register a new patient",
      "action":"FHIR client creates a new patient and save to FHIR server. The client can assign the Id.",
      "precondition":"Patient does not exist in FHIR server prior to action",
      "success":"Patient created correctly on FHIR server (use browser to inspect Patient)",
      "bonus":["The Patient resource has an extension"]
    },
    {"id":"s22-2","name":"Update a patient", "roleIds":["r22-1","r22-2"],
      "description":"Update a patient",
      "action":"FHIR client updates the patient created in scenario #1 and updates to FHIR server. The patient is retrieved by Id.",
      "precondition":"Patient has been created",
      "success":"Patient updated on FHIR server (use browser to inspect Patient)",
      "bonus":["Update a patient that has extensions, but leaving the extension untouched.",
        "Update a patient that has extensions, and update the extension also."]
    },
    {"id":"s22-3","name":"Retrieve Patient history", "roleIds":["r22-1","r22-2"],
      "description":"Retrieve Patient history",
      "action":"FHIR client searches the FHIR server for the history of a Patient",
      "precondition":"There is a patient that has at least one update",
      "success":"Patient's history displayed in interface. (use browser to query FHIR server)",
      "bonus":["The UI allows the user to display previous versions of the Patient"]},
    {"id":"s22-4","name":"Search for a patient on name", "roleIds":["r22-1","r22-2"],
      "description":"Search for a patient on name",
      "action":"FHIR client searches the FHIR server for patients with a given name",
      "precondition":"Patients with that name have  been created",
      "success":"patients displayed in interface. (use browser query to confirm)"},
    {"id":"s22-5","name":"Delete a patient", "roleIds":["r22-1","r22-2"],
      "description":"Delete a patient",
      "action":"FHIR client deletes the patient with a given id",
      "precondition":"a Patients with that Id has been created",
      "success":"Subsequently querying for the patient - either searching by name or by Id - fails."}


  ]
}